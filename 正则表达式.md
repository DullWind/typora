# 正则表达式--教程

### 概念

1.正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为"元字符"）。

正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。

### 示例

![CEBB49BB-B1AD-4539-AC7A-B40DDC62D1B2](C:\Users\Administrator\Desktop\项目框架\CEBB49BB-B1AD-4539-AC7A-B40DDC62D1B2.jpg)

^为匹配字符开始，【0-9】为匹配数字，+为匹配多个数字，abc匹配字母abc。$为匹配字符串结束位置

### 语法

1. 普通字符

    - [abc]--- 匹配【。。。】中所有出现的字符，如taobao中的aa
    - [^abc]匹配除了【。。。】中所有出现的字符，如taobao中的tobo
    - [a-z]表示一个区间，匹配所有小写字母，大写同理
    - **.** 表示匹配除了\n,\r之外的任何单个字符，如taobao就全部匹配
    - [\s\S]匹配所有字符。[\s]表示匹配所有空白符，包括换行。[\S]表示匹配所有非空白符。
    - \w 匹配字母，数字，下划线。
    - \W 匹配非字母，数字，下划线。
    - \D 匹配一个非数字字符
    - \d 匹配一个数字字符

2. 非打印字符

    - \f 匹配一个换页符
    - \n 匹配一个换行符
    - \r 匹配一个回车符
    - \s 匹配任何空白字符
    - \S 匹配任何非空白字符
    - \t 匹配一个制表符
    - \v 匹配一个垂直制表符

3. 特殊字符

    - 如果要匹配特殊字符本身，请使用 \ 加字符本身。如 \ $ 匹配$ 

    - $匹配输入字符的结尾位置
    - ()标记一个子表达的开始与结尾
    - *匹配前面表达式的零次或多次
    - +匹配前面表达式的一次或多次
    - [标记一个中括号表达式的开始
    - ？匹配前面表达式的零次或一次
    - ^ 匹配输入字符的开始位置，若在[] 中使用表示不接受该[]中的字符匹配
    - { 表示限定符表达式的开始
    - | 指明两项之间的一个选择

4. 限定符

    - *与+与？

    - {n} n 是一个非负整数，表示前的子表达式必须出现n次才匹配，如o{2},可以匹配‘food’但不能匹配hot
    - {n,}表示前面的子表达式至少出现n次才匹配
    - {n,m}n必须小于等于m ，表示至少匹配n次，至多匹配m次

5. 贪婪与非贪婪

    - *和+ 是贪婪的，他们会尽可能多的匹配字符。如

        ```
        /你.*好/
        ```

        会匹配

        ```
        你他娘的好啊，今天天气真好
        ```

        但如果加了？如

        ```
        /你.*？好/
        ```

        只会匹配

        ```
        你他娘的好
        ```

6. 定位符

    - ^ 匹配字符串的开始位置，如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。
    - $ 匹配字符串的输入位置，如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之前的位置匹配
    - \b 匹配一个单词的边界，可以是开头也可以是结尾。等价于匹配字母与空格的。
    - \B 非单词边界匹配+

7. 选择

    - 用原括号（）将所有选择括起来，相邻选择项之间用 | 分隔。() 表示捕获分组，() 会把每个分组里的匹配的值保存起来， 多个匹配值可以通过数字 n 来查看(**n** 是一个数字，表示第 n 个捕获组的内容)。
    - 如果使用?=、?<=、?!、?<! 会忽略相关匹配的保存，我的理解是（）里的表达是条件，我们所需要匹配的是满足（）里条件的外表达式。如：
        - exp1(?=exp2)：查找 exp2 前面的 exp1。
        - (?<=exp2)exp1：查找 exp2 后面的 exp1。
        - exp1(?!exp2)：查找后面不是 exp2 的 exp1。
        - (?<!exp2)exp1：查找前面不是 exp2 的 exp1。

8. 反向引用

    - 一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 \n 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。

        例1：

        > Is is the cost of of gasoline going up up?

        上面的句子很显然有多个重复的单词。如果能设计一种方法定位该句子，而不必查找每个单词的重复出现，那该有多好。下面的正则表达式使用单个子表达式来实现这一点：

        ```js
        var str = "Is is the cost of of gasoline going up up";
        var patt1 = /\b([a-z]+) \1\b/ig;
        document.write(str.match(patt1));
        // 输出Is is,of of,up up 
        ```

        捕获的表达式，正如 [a-z]+ 指定的，包括一个或多个字母。正则表达式的第二部分是对以前捕获的子匹配项的引用，即，单词的第二个匹配项正好由括号表达式匹配。\1 指定第一个子匹配项。

        单词边界元字符确保只检测整个单词。否则，诸如 "is issued" 或 "this is" 之类的词组将不能正确地被此表达式识别。

        正则表达式后面的全局标记 g 指定将该表达式应用到输入字符串中能够查找到的尽可能多的匹配。

        表达式的结尾处的不区分大小写 i 标记指定不区分大小写。

        

        例2：
        
        > http://www.runoob.com:80/html/html-tutorial.html
        
        ```js
        var str = "http://www.runoob.com:80/html/html-tutorial.html"; 
        var patt1 = /(\w+):\/\/([^/:]+)(:\d*)?([^# ]*)/; 
        arr = str.match(patt1); 
        for (var i = 0; i < arr.length ; i++) {    
            document.write(arr[i]);    
            document.write("<br>"); 
        }
        // 输出 http://www.runoob.com:80/html/html-tutorial.html
        //		http
        //		www.runoob.com
        //		80
        //		/html/html-tutorial.html
        ```

    ### 修饰符

    1. 标记也称为修饰符，正则表达式的标记用于指定额外的匹配策略。
        - 格式如：/pattern/flags
    2. 常用修饰符
        - i	ignore - 不区分大小写
        - g   global - 全局匹配
        - m    multi-line   - 多行匹配
        - s    特殊字符圆点 . 中包含换行符 \n

    ### 运算符优先级

    正则表达式从左到右进行计算。下表优先级从高到低。

    | 运算符                      | 描述                                                         |
    | --------------------------- | ------------------------------------------------------------ |
    | \                           | 转义符                                                       |
    | (), (?:), (?=), []          | 圆括号和方括号                                               |
    | *, +, ?, {n}, {n,}, {n,m}   | 限定符                                                       |
    | ^, $, \任何元字符、任何字符 | 定位点和序列（即：位置和顺序）                               |
    | \|                          | 替换，"或"操作  字符具有高于替换运算符的优先级，使得"m\|food"匹配"m"或"food"。若要匹配"mood"或"food"，请使用括号创建子表达式，从而产生"(m\|f)ood"。 |

# 常用正则表达式

## 一、校验数字的表达式

- 数字：**^[0-9]\*$**
-   n位的数字：**^\d{n}$**
-  至少n位的数字**：^\d{n,}$**
-  m-n位的数字：**^\d{m,n}$**
-  零和非零开头的数字：**^(0|[1-9][0-9]\*)$**
-  非零开头的最多带两位小数的数字：**^([1-9][0-9]\*)+(\.[0-9]{1,2})?$**
-  带1-2位小数的正数或负数：**^(\-)?\d+(\.\d{1,2})$**
-  正数、负数、和小数：**^(\-|\+)?\d+(\.\d+)?$**
-  有两位小数的正实数：**^[0-9]+(\.[0-9]{2})?$**
-  有1~3位小数的正实数：**^[0-9]+(\.[0-9]{1,3})?$**
-  非零的正整数：**^[1-9]\d\*$ 或 ^([1-9][0-9]\*){1,3}$ 或 ^\+?[1-9][0-9]\*$**
-  非零的负整数：**^\-[1-9][]0-9"\*$ 或 ^-[1-9]\d\*$**
-  非负整数：**^\d+$ 或 ^[1-9]\d\*|0$**
-  非正整数：**^-[1-9]\d\*|0$ 或 ^((-\d+)|(0+))$**
-  非负浮点数：**^\d+(\.\d+)?$ 或 ^[1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*|0?\.0+|0$**
-  非正浮点数：**^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*))|0?\.0+|0$**
-  正浮点数：**^[1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*$ 或 ^(([0-9]+\.[0-9]\*[1-9][0-9]\*)|([0-9]\*[1-9][0-9]\*\.[0-9]+)|([0-9]\*[1-9][0-9]\*))$**
-  负浮点数：**^-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*)$ 或 ^(-(([0-9]+\.[0-9]\*[1-9][0-9]\*)|([0-9]\*[1-9][0-9]\*\.[0-9]+)|([0-9]\*[1-9][0-9]\*)))$**
-  浮点数：**^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*|0?\.0+|0)$**

------

## 校验字符的表达式

- 汉字：**^[\u4e00-\u9fa5]{0,}$**
- 英文和数字：**^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$**
- 长度为3-20的所有字符：**^.{3,20}$**
- 由26个英文字母组成的字符串：**^[A-Za-z]+$**
- 由26个大写英文字母组成的字符串：**^[A-Z]+$**
- 由26个小写英文字母组成的字符串：**^[a-z]+$**
- 由数字和26个英文字母组成的字符串：**^[A-Za-z0-9]+$**
- 由数字、26个英文字母或者下划线组成的字符串：**^\w+$ 或 ^\w{3,20}$**
- 中文、英文、数字包括下划线：**^[\u4E00-\u9FA5A-Za-z0-9_]+$**
- 中文、英文、数字但不包括下划线等符号：**^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$**
- 可以输入含有^%&',;=?$\"等字符：**[^%&',;=?$\x22]+**
- 禁止输入含有~的字符：**[^~\x22]+**

------

## 三、特殊需求表达式

- Email地址：**^\w+([-+.]\w+)\*@\w+([-.]\w+)\*\.\w+([-.]\w+)\*$**
- 域名：**[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?**
- InternetURL：**[a-zA-z]+://[^\s]\* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]\*)?$**
- 手机号码：**^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$**
- 电话号码("XXX-XXXXXXX"、"XXXX-XXXXXXXX"、"XXX-XXXXXXX"、"XXX-XXXXXXXX"、"XXXXXXX"和"XXXXXXXX)：**^(\(\d{3,4}-)|\d{3.4}-)?\d{7,8}$** 
- 国内电话号码(0511-4405222、021-87888822)：**\d{3}-\d{8}|\d{4}-\d{7}**
- 电话号码正则表达式（支持手机号码，3-4位区号，7-8位直播号码，1－4位分机号）: **((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)**
- 身份证号(15位、18位数字)，最后一位是校验位，可能为数字或字符X：**(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)**
- 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：**^[a-zA-Z][a-zA-Z0-9_]{4,15}$**
- 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：**^[a-zA-Z]\w{5,17}$**
- 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：**^(?=.\*\d)(?=.\*[a-z])(?=.\*[A-Z])[a-zA-Z0-9]{8,10}$**  
- 强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在8-10之间)：**^(?=.\*\d)(?=.\*[a-z])(?=.\*[A-Z]).{8,10}$**  
- 日期格式：**^\d{4}-\d{1,2}-\d{1,2}**
- 一年的12个月(01～09和1～12)：**^(0?[1-9]|1[0-2])$**
- 一个月的31天(01～09和1～31)：**^((0?[1-9])|((1|2)[0-9])|30|31)$** 
- 钱的输入格式：
    1. ​    有四种钱的表示形式我们可以接受:"10000.00" 和 "10,000.00", 和没有 "分" 的 "10000" 和 "10,000"：**^[1-9][0-9]\*$** 
    2. ​    这表示任意一个不以0开头的数字,但是,这也意味着一个字符"0"不通过,所以我们采用下面的形式：**^(0|[1-9][0-9]\*)$** 
    3. ​    一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：**^(0|-?[1-9][0-9]\*)$** 
    4.    这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧。下面我们要加的是说明可能的小数部分：**^[0-9]+(.[0-9]+)?$** 
    5. ​    必须说明的是,小数点后面至少应该有1位数,所以"10."是不通过的,但是 "10" 和 "10.2" 是通过的：**^[0-9]+(.[0-9]{2})?$** 
    6. ​    这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：**^[0-9]+(.[0-9]{1,2})?$** 
    7. ​    这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：**^[0-9]{1,3}(,[0-9]{3})\*(.[0-9]{1,2})?$** 
    8. ​    1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：**^([0-9]+|[0-9]{1,3}(,[0-9]{3})\*)(.[0-9]{1,2})?$** 
    9. ​    备注：这就是最终结果了,别忘了"+"可以用"*"替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里
- xml文件：**^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$**
- 中文字符的正则表达式：**[\u4e00-\u9fa5]**
- 双字节字符：**[^\x00-\xff]    (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))**
- 空白行的正则表达式：**\n\s\*\r    (可以用来删除空白行)**
- HTML标记的正则表达式：**<(\S\*?)[^>]\*>.\*?|<.\*? />    ( 首尾空白字符的正则表达式：^\s\*|\s\*$或(^\s\*)|(\s\*$)    (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)**
- 腾讯QQ号：**[1-9][0-9]{4,}    (腾讯QQ号从10000开始)**
- 中国邮政编码：**[1-9]\d{5}(?!\d)    (中国邮政编码为6位数字)**
- IPv4地址：**((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}**
